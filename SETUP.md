# é‹å‹•å‹•ä½œåˆ†é¡ç³»çµ± - ç’°å¢ƒè¨­ç½®æŒ‡å—

æœ¬å°ˆé¡Œä½¿ç”¨æ·±åº¦å­¸ç¿’æ¨¡å‹ï¼ˆBiLSTM + Attentionï¼‰å°é‹å‹•å½±ç‰‡é€²è¡Œåˆ†é¡ã€‚ç‚ºäº†é”åˆ°æœ€ä½³æº–ç¢ºç‡ï¼Œå»ºè­°ä½¿ç”¨ **MediaPipe** ä½œç‚ºå§¿å‹¢ä¼°è¨ˆå™¨ã€‚

---

## ğŸ“‹ ç³»çµ±éœ€æ±‚

- **æ¨è–¦é…ç½®**ï¼šPython 3.11 + MediaPipeï¼ˆæº–ç¢ºç‡ 85-90%ï¼‰
- **æ›¿ä»£é…ç½®**ï¼šPython 3.14 + YOLOv8ï¼ˆæº–ç¢ºç‡ 60-70%ï¼‰

---

## ğŸ¯ æ–¹æ¡ˆ 1: ä½¿ç”¨ MediaPipeï¼ˆæ¨è–¦ï¼‰

### å„ªé»
âœ… å®Œæ•´ 33 å€‹é—œç¯€é»ï¼ˆåŒ…å«æ‰‹éƒ¨ç´°ç¯€ï¼‰
âœ… 3D åº§æ¨™ (x, y, z)
âœ… èˆ‡è¨“ç·´æ¨¡å‹å®Œå…¨åŒ¹é…
âœ… æº–ç¢ºç‡æœ€é«˜ï¼ˆ87%+ï¼‰

### å®‰è£æ­¥é©Ÿ

#### æ­¥é©Ÿ 1: å®‰è£ Python 3.11

**é¸é … A: ä½¿ç”¨ pyenvï¼ˆæ¨è–¦ï¼‰**
```bash
# å®‰è£ pyenv
brew install pyenv

# å®‰è£ Python 3.11.9
pyenv install 3.11.9

# è¨­å®šå°ˆæ¡ˆä½¿ç”¨çš„ Python ç‰ˆæœ¬
cd /Users/tershi/Project/å°ˆé¡Œ
pyenv local 3.11.9

# é©—è­‰ç‰ˆæœ¬
python --version  # æ‡‰è©²é¡¯ç¤º Python 3.11.9
```

**é¸é … B: ä½¿ç”¨ Conda**
```bash
# å‰µå»ºæ–°ç’°å¢ƒ
conda create -n exercise-classifier python=3.11

# å•Ÿç”¨ç’°å¢ƒ
conda activate exercise-classifier
```

#### æ­¥é©Ÿ 2: å®‰è£å¥—ä»¶
```bash
# å®‰è£ç›¸ä¾å¥—ä»¶
pip install torch>=2.0.0
pip install opencv-python>=4.8.0
pip install mediapipe==0.10.14
pip install numpy>=1.24.0
```

#### æ­¥é©Ÿ 3: é©—è­‰å®‰è£
```bash
# æª¢æŸ¥ç³»çµ±é…ç½®
python pose_config.py
```

æ‡‰è©²é¡¯ç¤ºï¼š
```
=== ç³»çµ±é…ç½® ===
Python ç‰ˆæœ¬: 3.11.9
MediaPipe: âœ“ 0.10.14
YOLOv8: âœ— æœªå®‰è£

æ¨è–¦: ä½¿ç”¨ MediaPipe ä»¥ç²å¾—æœ€ä½³æº–ç¢ºç‡
```

#### æ­¥é©Ÿ 4: æ¸¬è©¦å§¿å‹¢æå–
```bash
# æ¸¬è©¦ MediaPipe æå–å™¨
python pose_extractor_mediapipe.py example_video.mp4
```

---

## ğŸ”„ æ–¹æ¡ˆ 2: ä½¿ç”¨ YOLOv8ï¼ˆPython 3.14ï¼‰

### å„ªé»
âœ… æ”¯æ´æœ€æ–° Python ç‰ˆæœ¬
âœ… é€Ÿåº¦è¼ƒå¿«
âš ï¸  æº–ç¢ºç‡è¼ƒä½ï¼ˆ60-70%ï¼‰

### å®‰è£æ­¥é©Ÿ

```bash
# ç›´æ¥å®‰è£å¥—ä»¶ï¼ˆç•¶å‰ç’°å¢ƒå·²æ˜¯ Python 3.14ï¼‰
pip install torch>=2.0.0
pip install opencv-python>=4.8.0
pip install ultralytics>=8.0.0
pip install numpy>=1.24.0
```

### é©—è­‰å®‰è£
```bash
python pose_config.py
```

æ‡‰è©²é¡¯ç¤ºï¼š
```
=== ç³»çµ±é…ç½® ===
Python ç‰ˆæœ¬: 3.14.0
MediaPipe: âœ— æœªå®‰è£
YOLOv8: âœ“ å¯ç”¨

ç•¶å‰: ä½¿ç”¨ YOLOv8ï¼ˆæº–ç¢ºç‡å¯èƒ½è¼ƒä½ï¼‰
å»ºè­°: å®‰è£ Python 3.11 + MediaPipe ä»¥æå‡æº–ç¢ºç‡
```

---

## ğŸš€ ä½¿ç”¨æ–¹å¼

ç³»çµ±æœƒ**è‡ªå‹•é¸æ“‡**å¯ç”¨çš„å§¿å‹¢ä¼°è¨ˆå™¨ï¼ˆå„ªå…ˆ MediaPipeï¼‰ã€‚

### å–®ä¸€å½±ç‰‡åˆ†é¡
```bash
python demo.py
# é¸æ“‡é¸é … 1ï¼Œè¼¸å…¥å½±ç‰‡æª”å
```

### å¸¶è¦–è¦ºåŒ–è¼¸å‡º
```bash
python demo.py
# é¸æ“‡é¸é … 2ï¼Œè¼¸å…¥å½±ç‰‡æª”åå’Œè¼¸å‡ºæª”å
```

### æ‰¹æ¬¡è™•ç†
```bash
python demo.py
# é¸æ“‡é¸é … 3ï¼Œä¾åºè¼¸å…¥å¤šå€‹å½±ç‰‡æª”å
```

### å‘½ä»¤åˆ—ä½¿ç”¨
```bash
# åŸºæœ¬é æ¸¬
python inference_v2.py your_video.mp4

# é æ¸¬ä¸¦ç”¢ç”Ÿè¦–è¦ºåŒ–å½±ç‰‡
python inference_v2.py your_video.mp4 output.mp4
```

---

## ğŸ“Š é æœŸæ•ˆæœ

### MediaPipe ç‰ˆæœ¬
```
çª—å£é æ¸¬è©³æƒ…:
  çª—å£ 0: è‚©ä¸Šæ¨èˆ‰ (ä¿¡å¿ƒåº¦: 95.5%)
  çª—å£ 1: è‚©ä¸Šæ¨èˆ‰ (ä¿¡å¿ƒåº¦: 97.2%)
  çª—å£ 2: è‚©ä¸Šæ¨èˆ‰ (ä¿¡å¿ƒåº¦: 96.8%)

é æ¸¬çµæœ: è‚©ä¸Šæ¨èˆ‰ (Shoulder Press)
ä¿¡å¿ƒåº¦: 96.50%
```

### YOLOv8 ç‰ˆæœ¬ï¼ˆè¼ƒä¸ç©©å®šï¼‰
```
çª—å£é æ¸¬è©³æƒ…:
  çª—å£ 0: æ§“éˆ´äºŒé ­å½èˆ‰ (ä¿¡å¿ƒåº¦: 58.06%)
  çª—å£ 1: è‚©ä¸Šæ¨èˆ‰ (ä¿¡å¿ƒåº¦: 69.86%)
  çª—å£ 2: æ·±è¹² (ä¿¡å¿ƒåº¦: 45.85%)

é æ¸¬çµæœ: æ·±è¹² (Squat)
ä¿¡å¿ƒåº¦: 50.23%
```

---

## ğŸ”§ è¨ºæ–·å·¥å…·

### æª¢æŸ¥ç³»çµ±é…ç½®
```bash
python pose_config.py
```

### æ¸¬è©¦æ¨¡å‹è¼¸å…¥
```bash
python debug_model.py example_video.mp4
```

### åˆ†æå½±ç‰‡ç‰‡æ®µ
```bash
python analyze_video.py example_video.mp4
```

---

## â“ å¸¸è¦‹å•é¡Œ

### Q1: MediaPipe å®‰è£å¤±æ•—
**A:** ç¢ºèª Python ç‰ˆæœ¬ â‰¤ 3.11ã€‚MediaPipe ä¸æ”¯æ´ Python 3.12+ã€‚

### Q2: é æ¸¬çµæœä¸æº–ç¢º
**A:**
1. ç¢ºèªä½¿ç”¨ MediaPipeï¼ˆæº–ç¢ºç‡æ›´é«˜ï¼‰
2. æª¢æŸ¥å½±ç‰‡æ˜¯å¦åŒ…å«å¤šå€‹å‹•ä½œç‰‡æ®µ
3. ä½¿ç”¨ `analyze_video.py` åˆ†æå½±ç‰‡å…§å®¹

### Q3: å¦‚ä½•åœ¨å…©å€‹ç‰ˆæœ¬é–“åˆ‡æ›
**A:** ç³»çµ±æœƒè‡ªå‹•é¸æ“‡ã€‚å¦‚æœåŒæ™‚å®‰è£äº† MediaPipe å’Œ YOLOv8ï¼Œå„ªå…ˆä½¿ç”¨ MediaPipeã€‚

---

## ğŸ“ å°ˆæ¡ˆçµæ§‹

```
å°ˆé¡Œ/
â”œâ”€â”€ bilstm_mix_best_pt.pth           # è¨“ç·´å¥½çš„æ¨¡å‹æ¬Šé‡
â”œâ”€â”€ test.py                           # BiLSTM æ¨¡å‹å®šç¾©
â”œâ”€â”€ pose_config.py                    # è‡ªå‹•é…ç½®ç³»çµ± â­
â”œâ”€â”€ pose_extractor_mediapipe.py       # MediaPipe æå–å™¨ â­
â”œâ”€â”€ pose_extractor.py                 # YOLOv8 æå–å™¨
â”œâ”€â”€ feature_utils_v2.py               # ç‰¹å¾µè™•ç†ï¼ˆ102 ç¶­ï¼‰
â”œâ”€â”€ inference_v2.py                   # ä¸»è¦æ¨è«–ç³»çµ±
â”œâ”€â”€ demo.py                           # äº’å‹•å¼ç¤ºç¯„
â”œâ”€â”€ debug_model.py                    # è¨ºæ–·å·¥å…·
â”œâ”€â”€ analyze_video.py                  # å½±ç‰‡åˆ†æå·¥å…·
â”œâ”€â”€ requirements.txt                  # å¥—ä»¶æ¸…å–®ï¼ˆYOLOv8ï¼‰
â””â”€â”€ SETUP.md                          # æœ¬æ–‡ä»¶
```

---

## ğŸ“ æŠ€è¡“æ”¯æ´

é‡åˆ°å•é¡Œï¼Ÿè«‹æä¾›ä»¥ä¸‹è³‡è¨Šï¼š

```bash
# 1. ç³»çµ±è³‡è¨Š
python pose_config.py

# 2. è¨ºæ–·è¼¸å‡º
python debug_model.py example_video.mp4 > debug_output.txt

# 3. Python ç‰ˆæœ¬
python --version
```

---

**ç¥ä½ å°ˆé¡Œé †åˆ©ï¼ğŸ“**
