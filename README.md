# ðŸ’ª Fitness AI Trainer - æ™ºèƒ½é‹å‹•è¾¨è­˜èˆ‡è¨ˆæ•¸ç³»çµ±

çµåˆæ·±åº¦å­¸ç¿’ï¼ˆBiLSTM + Attentionï¼‰èˆ‡é›»è…¦è¦–è¦ºæŠ€è¡“ï¼Œæä¾›**è‡ªå‹•é‹å‹•è¾¨è­˜**å’Œ**å³æ™‚è¨ˆæ•¸**åŠŸèƒ½çš„æ™ºèƒ½å¥èº«æ•™ç·´ç³»çµ±ã€‚

![Python](https://img.shields.io/badge/Python-3.11-blue)
![PyTorch](https://img.shields.io/badge/PyTorch-2.0+-orange)
![MediaPipe](https://img.shields.io/badge/MediaPipe-0.10.14-green)
![Streamlit](https://img.shields.io/badge/Streamlit-1.50-red)

---

## âœ¨ ä¸»è¦åŠŸèƒ½

### ðŸ¤– è‡ªå‹•æ¨¡å¼
- âœ… **AI è‡ªå‹•è¾¨è­˜é‹å‹•é¡žåž‹**ï¼ˆæº–ç¢ºçŽ‡ 85-90%ï¼‰
- âœ… **å³æ™‚å‹•ä½œè¨ˆæ•¸**ï¼ˆä½¿ç”¨è§’åº¦é–¾å€¼æ¼”ç®—æ³•ï¼‰
- âœ… **å¤šé¡žåˆ¥æ©ŸçŽ‡é¡¯ç¤º**ï¼ˆäº†è§£ AI çš„åˆ¤æ–·ä¾æ“šï¼‰
- âœ… **ä¿¡å¿ƒåº¦æŒ‡æ¨™**ï¼ˆè©•ä¼°é æ¸¬å¯é æ€§ï¼‰

### âœ‹ æ‰‹å‹•æ¨¡å¼
- âœ… **æ‰‹å‹•é¸æ“‡é‹å‹•é¡žåž‹**
- âœ… **å°ˆæ³¨å–®ä¸€å‹•ä½œè¨“ç·´**
- âœ… **ç²¾ç¢ºè¨ˆæ•¸åé¥‹**

### ðŸ“Š è¦–è¦ºåŒ–åŠŸèƒ½
- âœ… **å³æ™‚éª¨æž¶ç–ŠåŠ **ï¼ˆMediaPipe Poseï¼‰
- âœ… **é—œéµé—œç¯€è§’åº¦é¡¯ç¤º**
- âœ… **å‹•ä½œéšŽæ®µæ¨™ç¤º**ï¼ˆUP/DOWNï¼‰
- âœ… **è¨ˆæ•¸å™¨é¢æ¿**

### ðŸŽ¯ æ”¯æ´é‹å‹•é¡žåž‹
1. æ§“éˆ´äºŒé ­å½Žèˆ‰ (Barbell Biceps Curl)
2. éŒ˜å¼å½Žèˆ‰ (Hammer Curl)
3. ä¼åœ°æŒºèº« (Push-up)
4. è‚©ä¸ŠæŽ¨èˆ‰ (Shoulder Press)
5. æ·±è¹² (Squat)

---

## ðŸš€ å¿«é€Ÿé–‹å§‹

### æ–¹æ³• 1: è‡ªå‹•å®‰è£è…³æœ¬ï¼ˆæŽ¨è–¦ï¼‰

```bash
# åŸ·è¡Œè‡ªå‹•å®‰è£è…³æœ¬
bash install_mediapipe.sh

# å•Ÿå‹• Web æ‡‰ç”¨
bash run_app.sh
```

ç„¶å¾Œåœ¨ç€è¦½å™¨é–‹å•Ÿ http://localhost:8501

### æ–¹æ³• 2: æ‰‹å‹•å®‰è£

#### æ­¥é©Ÿ 1: å»ºç«‹ Python 3.11 è™›æ“¬ç’°å¢ƒ

```bash
# ä½¿ç”¨ç³»çµ±çš„ Python 3.11
python3.11 -m venv venv_mediapipe

# å•Ÿå‹•è™›æ“¬ç’°å¢ƒ
source venv_mediapipe/bin/activate
```

#### æ­¥é©Ÿ 2: å®‰è£å¥—ä»¶

```bash
pip install --upgrade pip
pip install torch opencv-python mediapipe==0.10.14 numpy streamlit
```

#### æ­¥é©Ÿ 3: é©—è­‰å®‰è£

```bash
python pose_config.py
```

æ‡‰è©²çœ‹åˆ°ï¼š
```
=== ç³»çµ±é…ç½® ===
âœ“ ä½¿ç”¨ MediaPipe 0.10.14
Python ç‰ˆæœ¬: 3.11.x
```

#### æ­¥é©Ÿ 4: å•Ÿå‹•æ‡‰ç”¨

```bash
streamlit run app.py
```

---

## ðŸ“– ä½¿ç”¨æŒ‡å—

### Web ä»‹é¢æ“ä½œ

1. **é¸æ“‡æ¨¡å¼**
   - ðŸ¤– è‡ªå‹•æ¨¡å¼ï¼šAI è‡ªå‹•è¾¨è­˜é‹å‹•
   - âœ‹ æ‰‹å‹•æ¨¡å¼ï¼šæ‰‹å‹•é¸æ“‡é‹å‹•é¡žåž‹

2. **é¸æ“‡è¼¸å…¥ä¾†æº**
   - ðŸ“¹ å½±ç‰‡æª”æ¡ˆï¼šä¸Šå‚³é‹å‹•å½±ç‰‡ï¼ˆæ”¯æ´ mp4, avi, movï¼‰
   - ðŸ“· å³æ™‚æ”å½±æ©Ÿï¼šä½¿ç”¨é›»è…¦æ”å½±æ©Ÿå³æ™‚åˆ†æž

3. **é–‹å§‹è¨“ç·´**
   - ä¸Šå‚³å½±ç‰‡æˆ–å•Ÿå‹•æ”å½±æ©Ÿ
   - ç³»çµ±æœƒè‡ªå‹•åµæ¸¬å§¿æ…‹ä¸¦è¨ˆæ•¸
   - æŸ¥çœ‹å³æ™‚åé¥‹å’Œçµ±è¨ˆè³‡æ–™

### å‘½ä»¤åˆ—ä½¿ç”¨ï¼ˆå‚³çµ±æ–¹å¼ï¼‰

#### å–®ä¸€å½±ç‰‡åˆ†é¡ž
```bash
python demo.py
# é¸æ“‡é¸é … 1ï¼Œè¼¸å…¥å½±ç‰‡æª”å
```

#### å¸¶è¦–è¦ºåŒ–è¼¸å‡º
```bash
python inference_v2.py example_video.mp4 output.mp4
```

---

## ðŸ—ï¸ ç³»çµ±æž¶æ§‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   å½±ç‰‡/æ”å½±æ©Ÿ    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MediaPipe Pose  â”‚ â† 33 é—œç¯€é»ž (x, y, z, visibility)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ç‰¹å¾µæå–å™¨      â”‚ â† 102 ç¶­ç‰¹å¾µï¼ˆè§’åº¦+åº§æ¨™+å¹¾ä½•ï¼‰
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ BiLSTM + Attn   â”‚ â† æ·±åº¦å­¸ç¿’æ¨¡åž‹
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  é‹å‹•åˆ†é¡žçµæžœ    â”‚ â† 5 ç¨®é‹å‹•é¡žåˆ¥
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¨ˆæ•¸æ¼”ç®—æ³•      â”‚ â† è§’åº¦é–¾å€¼æª¢æ¸¬
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  è¦–è¦ºåŒ–è¼¸å‡º      â”‚ â† Streamlit UI
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ðŸ§  æŠ€è¡“ç´°ç¯€

### æ·±åº¦å­¸ç¿’æ¨¡åž‹
- **æž¶æ§‹**: BiLSTM (2å±¤) + Attention Mechanism
- **è¼¸å…¥**: 102 ç¶­ç‰¹å¾µå‘é‡ Ã— 45 å¹€
- **è¼¸å‡º**: 5 é¡žé‹å‹•åˆ†é¡ž
- **è¨“ç·´æ•¸æ“š**: å¤šç¨®é‹å‹•å½±ç‰‡æ•¸æ“šé›†

### å§¿æ…‹ä¼°è¨ˆ
- **å¼•æ“Ž**: Google MediaPipe Pose
- **é—œç¯€é»ž**: 33 å€‹å…¨èº«é—œéµé»ž
- **åº§æ¨™**: 3D (x, y, z) + å¯è¦‹åº¦

### ç‰¹å¾µå·¥ç¨‹ï¼ˆ102 ç¶­ï¼‰
1. **8 å€‹é—œç¯€è§’åº¦** - å·¦å³æ‰‹è‚˜ã€è‚©è†€ã€è†è“‹ã€é«–éƒ¨
2. **51 å€‹ 3D åº§æ¨™** - 17 å€‹é—œéµé»žçš„ (x, y, z)
3. **43 å€‹å¹¾ä½•ç‰¹å¾µ** - è·é›¢ã€æ¯”ä¾‹ã€ç›¸å°ä½ç½®

### è¨ˆæ•¸æ¼”ç®—æ³•
ä½¿ç”¨ç‹€æ…‹æ©Ÿ + è§’åº¦é–¾å€¼ï¼š

| é‹å‹•é¡žåž‹ | é—œç¯€ | DOWN é–¾å€¼ | UP é–¾å€¼ |
|---------|------|-----------|---------|
| æ§“éˆ´äºŒé ­å½Žèˆ‰ | æ‰‹è‚˜ | > 140Â° | < 90Â° |
| éŒ˜å¼å½Žèˆ‰ | æ‰‹è‚˜ | > 140Â° | < 90Â° |
| ä¼åœ°æŒºèº« | æ‰‹è‚˜ | < 90Â° | > 140Â° |
| è‚©ä¸ŠæŽ¨èˆ‰ | æ‰‹è‚˜ | < 90Â° | > 160Â° |
| æ·±è¹² | è†è“‹ | > 160Â° | < 100Â° |

---

## ðŸ“ å°ˆæ¡ˆçµæ§‹

```
å°ˆé¡Œ/
â”œâ”€â”€ app.py                           # ðŸŒŸ Streamlit Web æ‡‰ç”¨ï¼ˆä¸»ç¨‹å¼ï¼‰
â”œâ”€â”€ exercise_counter.py              # ðŸŒŸ é‹å‹•è¨ˆæ•¸æ¨¡çµ„
â”œâ”€â”€ visualization.py                 # ðŸŒŸ è¦–è¦ºåŒ–ç¹ªåœ–æ¨¡çµ„
â”œâ”€â”€ bilstm_mix_best_pt.pth          # è¨“ç·´å¥½çš„æ¨¡åž‹æ¬Šé‡
â”œâ”€â”€ test.py                          # BiLSTM æ¨¡åž‹å®šç¾©
â”œâ”€â”€ pose_config.py                   # è‡ªå‹•é…ç½®ç³»çµ±
â”œâ”€â”€ pose_extractor_mediapipe.py      # MediaPipe å§¿æ…‹æå–å™¨
â”œâ”€â”€ pose_extractor.py                # YOLOv8 å§¿æ…‹æå–å™¨ï¼ˆå‚™ç”¨ï¼‰
â”œâ”€â”€ feature_utils_v2.py              # ç‰¹å¾µè™•ç†å·¥å…·
â”œâ”€â”€ inference_v2.py                  # æŽ¨è«–å¼•æ“Ž
â”œâ”€â”€ demo.py                          # å‘½ä»¤åˆ—ç¤ºç¯„
â”œâ”€â”€ install_mediapipe.sh             # è‡ªå‹•å®‰è£è…³æœ¬
â”œâ”€â”€ run_app.sh                       # ðŸŒŸ å•Ÿå‹•è…³æœ¬
â”œâ”€â”€ SETUP.md                         # è©³ç´°å®‰è£æŒ‡å—
â””â”€â”€ README.md                        # æœ¬æ–‡ä»¶
```

---

## ðŸ“Š æ•ˆèƒ½è¡¨ç¾

### æº–ç¢ºçŽ‡
- **MediaPipe + BiLSTM**: 85-90%
- **YOLOv8 + BiLSTM**: 60-70%

### é€Ÿåº¦
- **å½±ç‰‡è™•ç†**: ~15-20 FPS (CPU)
- **å³æ™‚æ”å½±æ©Ÿ**: ~10-15 FPS (CPU)

### ç³»çµ±éœ€æ±‚
- **RAM**: å»ºè­° 8GB+
- **CPU**: ç¾ä»£å¤šæ ¸å¿ƒè™•ç†å™¨
- **GPU**: éžå¿…è¦ï¼ˆä½†å¯åŠ é€Ÿï¼‰

---

## ðŸ’¡ ä½¿ç”¨æŠ€å·§

### ç²å¾—æœ€ä½³æ•ˆæžœ
1. âœ… ç¢ºä¿**å…¨èº«**éƒ½åœ¨ç•«é¢ä¸­
2. âœ… ä¿æŒè‰¯å¥½çš„**å…‰ç·š**æ¢ä»¶
3. âœ… å‹•ä½œ**å®Œæ•´æ¸…æ™°**ï¼Œé¿å…é®æ“‹
4. âœ… ç©¿è‘—**å°æ¯”æ˜Žé¡¯**çš„æœè£
5. âœ… é¿å…**å¿«é€Ÿç§»å‹•**é€ æˆæ¨¡ç³Š

### å¸¸è¦‹å•é¡Œ

**Q: è¨ˆæ•¸ä¸æº–ç¢ºæ€Žéº¼è¾¦ï¼Ÿ**
- ç¢ºèªå‹•ä½œå¹…åº¦è¶³å¤ å¤§
- æª¢æŸ¥é—œç¯€é»žæ˜¯å¦æ­£ç¢ºåµæ¸¬
- èª¿æ•´é–¾å€¼åƒæ•¸ï¼ˆåœ¨ `exercise_counter.py`ï¼‰

**Q: è‡ªå‹•è¾¨è­˜éŒ¯èª¤ï¼Ÿ**
- åˆ‡æ›åˆ°æ‰‹å‹•æ¨¡å¼
- ç¢ºä¿å½±ç‰‡ä¸­åªæœ‰å–®ä¸€é‹å‹•é¡žåž‹
- æª¢æŸ¥å§¿æ…‹åµæ¸¬å“è³ª

**Q: å³æ™‚æ”å½±æ©Ÿå»¶é²ï¼Ÿ**
- é™ä½Žå½±ç‰‡è§£æžåº¦
- é—œé–‰å…¶ä»–å ç”¨ CPU çš„ç¨‹å¼
- è€ƒæ…®ä½¿ç”¨ GPU åŠ é€Ÿ

---

## ðŸ”§ é–‹ç™¼èˆ‡è‡ªè¨‚

### æ–°å¢žé‹å‹•é¡žåž‹

1. **è¨“ç·´æ–°æ¨¡åž‹**ï¼ˆä¿®æ”¹ `test.py` ä¸­çš„ `num_classes`ï¼‰
2. **è¨­å®šè¨ˆæ•¸é–¾å€¼**ï¼ˆä¿®æ”¹ `exercise_counter.py` ä¸­çš„ `thresholds`ï¼‰
3. **æ›´æ–°é¡žåˆ¥åç¨±**ï¼ˆä¿®æ”¹ `app.py` ä¸­çš„ `class_names`ï¼‰

### èª¿æ•´è¨ˆæ•¸åƒæ•¸

ç·¨è¼¯ `exercise_counter.py`:
```python
self.thresholds = {
    0: {"down_angle": 140, "up_angle": 90, "joint": "elbow"},
    # èª¿æ•´é–¾å€¼ä»¥ç¬¦åˆä½ çš„éœ€æ±‚
}
```

---

## ðŸ“š åƒè€ƒè³‡æº

- [MediaPipe Pose](https://google.github.io/mediapipe/solutions/pose.html)
- [Streamlit Documentation](https://docs.streamlit.io/)
- [PyTorch Documentation](https://pytorch.org/docs/)

---

## ðŸ“„ æŽˆæ¬Š

æœ¬å°ˆæ¡ˆåƒ…ä¾›æ•™è‚²å’Œç ”ç©¶ç”¨é€”ã€‚

---

## ðŸ‘¥ è²¢ç»è€…

å°ˆé¡Œè£½ä½œåœ˜éšŠ

---

## ðŸ“ž æŠ€è¡“æ”¯æ´

é‡åˆ°å•é¡Œï¼Ÿè«‹æä¾›ä»¥ä¸‹è³‡è¨Šï¼š

```bash
# 1. ç³»çµ±è³‡è¨Š
python pose_config.py

# 2. Python ç‰ˆæœ¬
python --version

# 3. å·²å®‰è£å¥—ä»¶
pip list | grep -E "mediapipe|streamlit|torch"
```

---

**ç¥ä½ è¨“ç·´æ„‰å¿«ï¼ðŸ’ªðŸ‹ï¸â€â™‚ï¸**
